{"ast":null,"code":"// src/components/OutfitPreview.jsx\n\"use client\";\n\n// Component for virtual try-on with image overlay\nvar _jsxFileName = \"C:\\\\Users\\\\abhig\\\\Downloads\\\\fitlook-app\\\\frontend\\\\src\\\\components\\\\OutfitPreview.jsx\",\n  _s = $RefreshSig$();\nimport { useContext, useRef, useEffect } from \"react\";\n// Assuming FitLookContext is defined in a separate context file\nimport { FitLookContext } from \"../context/FitLookContext\";\nimport \"../styles/OutfitPreview.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction OutfitPreview() {\n  _s();\n  // Destructure selectedItems for cleaner use\n  const {\n    userImage,\n    selectedItems,\n    setCurrentStep\n  } = useContext(FitLookContext);\n  const canvasRef = useRef(null);\n\n  // Draw outfit preview on canvas\n  useEffect(() => {\n    // FIX: Added selectedItems to dependency array. This is CRITICAL \n    // for the canvas to redraw when an item is added or removed.\n    if (canvasRef.current && userImage) {\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext(\"2d\");\n\n      // Helper to load and draw an image\n      const loadImageAndDraw = (src, drawFunc) => {\n        const img = new Image();\n        img.crossOrigin = \"anonymous\";\n        img.onload = () => drawFunc(img);\n        img.onerror = () => console.error(\"Failed to load image:\", src);\n        img.src = src;\n      };\n\n      // Load base image and start drawing process\n      loadImageAndDraw(userImage, img => {\n        // Set canvas size to match image\n        canvas.width = img.width;\n        canvas.height = img.height;\n\n        // Draw base image\n        ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear before redrawing\n        ctx.drawImage(img, 0, 0);\n        const itemsToDraw = [{\n          item: selectedItems.top,\n          category: \"top\"\n        }, {\n          item: selectedItems.bottom,\n          category: \"bottom\"\n        }, {\n          item: selectedItems.shoes,\n          category: \"shoes\"\n        }, {\n          item: selectedItems.accessory,\n          category: \"accessory\"\n        } // Added accessory\n        ];\n        itemsToDraw.forEach(({\n          item,\n          category\n        }) => {\n          if (item && item.image) {\n            drawClothingItem(ctx, item.image, category, img.height);\n          }\n        });\n      });\n    }\n  }, [userImage, selectedItems]); // FIX: Correct dependency array\n\n  // Helper function to draw clothing items on canvas\n  const drawClothingItem = (ctx, itemImage, category, imageHeight) => {\n    const img = new Image();\n    img.crossOrigin = \"anonymous\";\n    img.onload = () => {\n      // Basic positioning logic based on category\n      let y = 0;\n      let height = imageHeight / 3;\n      let x = 0;\n      let width = ctx.canvas.width;\n\n      // Simple vertical segmentation (Needs refinement for real use)\n      if (category === \"top\") {\n        y = imageHeight * 0.1;\n      } else if (category === \"bottom\") {\n        y = imageHeight * 0.4;\n      } else if (category === \"shoes\") {\n        y = imageHeight * 0.75;\n      } else if (category === \"accessory\") {\n        y = 0; // Placeholder: maybe place near the top\n        height = imageHeight * 0.1;\n      }\n\n      // Draw with transparency (basic overlay simulation)\n      ctx.globalAlpha = 0.8;\n      ctx.drawImage(img, x, y, width, height);\n      ctx.globalAlpha = 1;\n    };\n    img.src = itemImage;\n  };\n\n  // Check if complete outfit is selected (Top + Bottom)\n  const isCompleteOutfit = selectedItems.top && selectedItems.bottom;\n\n  // Handle complete outfit purchase\n  const handleBuyCompleteOutfit = async () => {\n    const itemsForCart = [];\n    if (selectedItems.top) itemsForCart.push({\n      id: selectedItems.top.id,\n      category: 'top'\n    });\n    if (selectedItems.bottom) itemsForCart.push({\n      id: selectedItems.bottom.id,\n      category: 'bottom'\n    });\n    if (selectedItems.shoes) itemsForCart.push({\n      id: selectedItems.shoes.id,\n      category: 'shoes'\n    });\n    // Assuming accessories is an array in context:\n    if (selectedItems.accessories) {\n      selectedItems.accessories.forEach(a => itemsForCart.push({\n        id: a.id,\n        category: 'accessory'\n      }));\n    }\n    try {\n      // POST to backend to get the Shopify checkout URL\n      const response = await fetch(\"/api/cart/add-outfit\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          items: itemsForCart\n        })\n      });\n      if (response.ok) {\n        const data = await response.json();\n        if (data.cartUrl) {\n          window.location.href = data.cartUrl; // Redirect to Shopify checkout\n        } else {\n          alert(\"Checkout URL not received from the server.\");\n        }\n      } else {\n        alert(\"Failed to create cart URL: \" + response.statusText);\n      }\n    } catch (error) {\n      console.error(\"Error adding to cart:\", error);\n      alert(\"Failed to add outfit to cart\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"outfit-preview\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Your Outfit Preview\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"preview-container\",\n      children: userImage ? /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        className: \"preview-canvas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"placeholder-preview\",\n        children: \"Please select an image and items in the catalog.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"selected-items-summary\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Selected Items\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), selectedItems.top && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Top:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: selectedItems.top.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"$\", selectedItems.top.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this), selectedItems.bottom && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Bottom:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: selectedItems.bottom.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"$\", selectedItems.bottom.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }, this), selectedItems.shoes && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Shoes:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: selectedItems.shoes.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"$\", selectedItems.shoes.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), isCompleteOutfit && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"discount-banner\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Complete the Look!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Get **10% off** when you buy the complete outfit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: handleBuyCompleteOutfit,\n        children: \"Buy Complete Outfit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"preview-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary\",\n        onClick: () => setCurrentStep(\"catalog\"),\n        children: \"Back to Catalog\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), !isCompleteOutfit && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => setCurrentStep(\"catalog\"),\n        children: \"Add More Items\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n}\n_s(OutfitPreview, \"We//kSiHVgvPjbEX6TYVZXmzPmk=\");\n_c = OutfitPreview;\nexport default OutfitPreview;\nvar _c;\n$RefreshReg$(_c, \"OutfitPreview\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useContext","useRef","useEffect","FitLookContext","jsxDEV","_jsxDEV","OutfitPreview","userImage","selectedItems","setCurrentStep","canvasRef","current","canvas","ctx","getContext","loadImageAndDraw","src","drawFunc","img","Image","crossOrigin","onload","onerror","console","error","width","height","clearRect","drawImage","itemsToDraw","item","top","category","bottom","shoes","accessory","forEach","image","drawClothingItem","itemImage","imageHeight","y","x","globalAlpha","isCompleteOutfit","handleBuyCompleteOutfit","itemsForCart","push","id","accessories","a","response","fetch","method","headers","body","JSON","stringify","items","ok","data","json","cartUrl","window","location","href","alert","statusText","className","children","fileName","lineNumber","columnNumber","ref","title","price","onClick","_c","$RefreshReg$"],"sources":["C:/Users/abhig/Downloads/fitlook-app/frontend/src/components/OutfitPreview.jsx"],"sourcesContent":["// src/components/OutfitPreview.jsx\n\"use client\"\n\n// Component for virtual try-on with image overlay\nimport { useContext, useRef, useEffect } from \"react\"\n// Assuming FitLookContext is defined in a separate context file\nimport { FitLookContext } from \"../context/FitLookContext\" \nimport \"../styles/OutfitPreview.css\"\n\nfunction OutfitPreview() {\n  // Destructure selectedItems for cleaner use\n  const { userImage, selectedItems, setCurrentStep } = useContext(FitLookContext)\n  const canvasRef = useRef(null)\n\n  // Draw outfit preview on canvas\n  useEffect(() => {\n    // FIX: Added selectedItems to dependency array. This is CRITICAL \n    // for the canvas to redraw when an item is added or removed.\n    if (canvasRef.current && userImage) {\n      const canvas = canvasRef.current\n      const ctx = canvas.getContext(\"2d\")\n\n      // Helper to load and draw an image\n      const loadImageAndDraw = (src, drawFunc) => {\n        const img = new Image()\n        img.crossOrigin = \"anonymous\"\n        img.onload = () => drawFunc(img)\n        img.onerror = () => console.error(\"Failed to load image:\", src)\n        img.src = src\n      }\n\n      // Load base image and start drawing process\n      loadImageAndDraw(userImage, (img) => {\n        // Set canvas size to match image\n        canvas.width = img.width\n        canvas.height = img.height\n\n        // Draw base image\n        ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear before redrawing\n        ctx.drawImage(img, 0, 0)\n\n        const itemsToDraw = [\n          { item: selectedItems.top, category: \"top\" },\n          { item: selectedItems.bottom, category: \"bottom\" },\n          { item: selectedItems.shoes, category: \"shoes\" },\n          { item: selectedItems.accessory, category: \"accessory\" } // Added accessory\n        ]\n\n        itemsToDraw.forEach(({ item, category }) => {\n          if (item && item.image) {\n            drawClothingItem(ctx, item.image, category, img.height)\n          }\n        })\n      })\n    }\n  }, [userImage, selectedItems]) // FIX: Correct dependency array\n\n  // Helper function to draw clothing items on canvas\n  const drawClothingItem = (ctx, itemImage, category, imageHeight) => {\n    const img = new Image()\n    img.crossOrigin = \"anonymous\"\n    img.onload = () => {\n      // Basic positioning logic based on category\n      let y = 0\n      let height = imageHeight / 3 \n      let x = 0\n      let width = ctx.canvas.width\n\n      // Simple vertical segmentation (Needs refinement for real use)\n      if (category === \"top\") {\n        y = imageHeight * 0.1\n      } else if (category === \"bottom\") {\n        y = imageHeight * 0.4\n      } else if (category === \"shoes\") {\n        y = imageHeight * 0.75\n      } else if (category === \"accessory\") {\n        y = 0 // Placeholder: maybe place near the top\n        height = imageHeight * 0.1\n      }\n      \n      // Draw with transparency (basic overlay simulation)\n      ctx.globalAlpha = 0.8\n      ctx.drawImage(img, x, y, width, height) \n      ctx.globalAlpha = 1\n    }\n    img.src = itemImage\n  }\n\n  // Check if complete outfit is selected (Top + Bottom)\n  const isCompleteOutfit = selectedItems.top && selectedItems.bottom\n\n  // Handle complete outfit purchase\n  const handleBuyCompleteOutfit = async () => {\n    const itemsForCart = [];\n    if (selectedItems.top) itemsForCart.push({ id: selectedItems.top.id, category: 'top' });\n    if (selectedItems.bottom) itemsForCart.push({ id: selectedItems.bottom.id, category: 'bottom' });\n    if (selectedItems.shoes) itemsForCart.push({ id: selectedItems.shoes.id, category: 'shoes' });\n    // Assuming accessories is an array in context:\n    if (selectedItems.accessories) {\n      selectedItems.accessories.forEach(a => itemsForCart.push({ id: a.id, category: 'accessory' }));\n    }\n\n    try {\n      // POST to backend to get the Shopify checkout URL\n      const response = await fetch(\"/api/cart/add-outfit\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ items: itemsForCart }),\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        if (data.cartUrl) {\n          window.location.href = data.cartUrl // Redirect to Shopify checkout\n        } else {\n          alert(\"Checkout URL not received from the server.\")\n        }\n      } else {\n        alert(\"Failed to create cart URL: \" + response.statusText)\n      }\n    } catch (error) {\n      console.error(\"Error adding to cart:\", error)\n      alert(\"Failed to add outfit to cart\")\n    }\n  }\n\n  return (\n    <div className=\"outfit-preview\">\n      <h2>Your Outfit Preview</h2>\n\n      {/* Canvas for outfit preview */}\n      <div className=\"preview-container\">\n        {userImage ? (\n          <canvas ref={canvasRef} className=\"preview-canvas\" />\n        ) : (\n          <div className=\"placeholder-preview\">Please select an image and items in the catalog.</div>\n        )}\n      </div>\n\n      {/* Selected items summary (simplified for brevity) */}\n      <div className=\"selected-items-summary\">\n        {/* ... (Summary JSX is fine) ... */}\n        <h3>Selected Items</h3>\n        {selectedItems.top && (\n          <div className=\"item-summary\">\n            <span>Top:</span>\n            <span>{selectedItems.top.title}</span>\n            <span>${selectedItems.top.price}</span>\n          </div>\n        )}\n        {selectedItems.bottom && (\n          <div className=\"item-summary\">\n            <span>Bottom:</span>\n            <span>{selectedItems.bottom.title}</span>\n            <span>${selectedItems.bottom.price}</span>\n          </div>\n        )}\n        {selectedItems.shoes && (\n          <div className=\"item-summary\">\n            <span>Shoes:</span>\n            <span>{selectedItems.shoes.title}</span>\n            <span>${selectedItems.shoes.price}</span>\n          </div>\n        )}\n      </div>\n\n      {/* Discount banner */}\n      {isCompleteOutfit && (\n        <div className=\"discount-banner\">\n          <h3>Complete the Look!</h3>\n          <p>Get **10% off** when you buy the complete outfit</p>\n          <button className=\"btn btn-primary\" onClick={handleBuyCompleteOutfit}>\n            Buy Complete Outfit\n          </button>\n        </div>\n      )}\n\n      {/* Navigation buttons */}\n      <div className=\"preview-actions\">\n        <button className=\"btn btn-secondary\" onClick={() => setCurrentStep(\"catalog\")}>\n          Back to Catalog\n        </button>\n        {!isCompleteOutfit && (\n          <button className=\"btn btn-primary\" onClick={() => setCurrentStep(\"catalog\")}>\n            Add More Items\n          </button>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default OutfitPreview"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}