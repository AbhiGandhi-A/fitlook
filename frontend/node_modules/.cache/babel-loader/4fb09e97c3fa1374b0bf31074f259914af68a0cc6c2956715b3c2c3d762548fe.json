{"ast":null,"code":"\"use client\";import _objectSpread from\"C:/Users/abhig/Downloads/fitlook-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState}from\"react\";import{apiCall}from\"../services/apiClient\";import\"../styles/AdminPanel.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminPanel(){const[adminPassword,setAdminPassword]=useState(\"\");const[isAuthenticated,setIsAuthenticated]=useState(false);const[discountRules,setDiscountRules]=useState([]);const[newRule,setNewRule]=useState({name:\"\",description:\"\",discountPercentage:10,requiredItems:{top:true,bottom:true}});const[loading,setLoading]=useState(false);const handleAdminLogin=async e=>{e.preventDefault();if(adminPassword!==\"admin123\"){alert(\"Invalid password\");return;}setLoading(true);try{const data=await apiCall(\"/admin/discount-rules\",\"GET\",null,{adminPassword});setIsAuthenticated(true);setDiscountRules(Array.isArray(data)?data:[]);console.log(\"[FitLook] Admin authenticated successfully\");}catch(error){console.error(\"[FitLook] Error fetching discount rules:\",error);alert(\"Login failed: \"+error.message);}finally{setLoading(false);}};const handleCreateRule=async e=>{e.preventDefault();setLoading(true);try{const result=await apiCall(\"/admin/discount-rules\",\"POST\",newRule,{adminPassword});if(result.success||result.rule){const rule=result.rule||result;setDiscountRules([...discountRules,rule]);setNewRule({name:\"\",description:\"\",discountPercentage:10,requiredItems:{top:true,bottom:true}});alert(\"Discount rule created successfully\");}}catch(error){console.error(\"[FitLook] Error creating rule:\",error);alert(\"Failed to create discount rule: \"+error.message);}finally{setLoading(false);}};if(!isAuthenticated){return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-login\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Panel\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAdminLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Admin Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:adminPassword,onChange:e=>setAdminPassword(e.target.value),placeholder:\"Enter admin password (admin123)\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?\"Logging in...\":\"Login\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-panel\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Panel\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"admin-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Create Discount Rule\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateRule,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"ruleName\",children:\"Rule Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"ruleName\",value:newRule.name,onChange:e=>setNewRule(_objectSpread(_objectSpread({},newRule),{},{name:e.target.value})),placeholder:\"e.g., Complete Outfit Discount\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",value:newRule.description,onChange:e=>setNewRule(_objectSpread(_objectSpread({},newRule),{},{description:e.target.value})),placeholder:\"Describe the discount rule\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"discount\",children:\"Discount Percentage\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"discount\",value:newRule.discountPercentage,onChange:e=>setNewRule(_objectSpread(_objectSpread({},newRule),{},{discountPercentage:Number.parseInt(e.target.value)})),min:\"0\",max:\"100\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?\"Creating...\":\"Create Rule\"})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"admin-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Existing Discount Rules\"}),discountRules.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"rules-list\",children:discountRules.map(rule=>/*#__PURE__*/_jsxs(\"div\",{className:\"rule-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:rule.name}),/*#__PURE__*/_jsx(\"p\",{children:rule.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"discount-badge\",children:[rule.discountPercentage,\"% OFF\"]})]},rule._id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No discount rules created yet\"})]})]});}export default AdminPanel;","map":{"version":3,"names":["_objectSpread","useState","apiCall","jsx","_jsx","jsxs","_jsxs","AdminPanel","adminPassword","setAdminPassword","isAuthenticated","setIsAuthenticated","discountRules","setDiscountRules","newRule","setNewRule","name","description","discountPercentage","requiredItems","top","bottom","loading","setLoading","handleAdminLogin","e","preventDefault","alert","data","Array","isArray","console","log","error","message","handleCreateRule","result","success","rule","className","children","onSubmit","htmlFor","type","id","value","onChange","target","placeholder","disabled","required","Number","parseInt","min","max","length","map","_id"],"sources":["C:/Users/abhig/Downloads/fitlook-app/frontend/src/components/AdminPanel.jsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { apiCall } from \"../services/apiClient\"\nimport \"../styles/AdminPanel.css\"\n\nfunction AdminPanel() {\n  const [adminPassword, setAdminPassword] = useState(\"\")\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n  const [discountRules, setDiscountRules] = useState([])\n  const [newRule, setNewRule] = useState({\n    name: \"\",\n    description: \"\",\n    discountPercentage: 10,\n    requiredItems: { top: true, bottom: true },\n  })\n  const [loading, setLoading] = useState(false)\n\n  const handleAdminLogin = async (e) => {\n    e.preventDefault()\n\n    if (adminPassword !== \"admin123\") {\n      alert(\"Invalid password\")\n      return\n    }\n\n    setLoading(true)\n    try {\n      const data = await apiCall(\"/admin/discount-rules\", \"GET\", null, { adminPassword })\n      setIsAuthenticated(true)\n      setDiscountRules(Array.isArray(data) ? data : [])\n      console.log(\"[FitLook] Admin authenticated successfully\")\n    } catch (error) {\n      console.error(\"[FitLook] Error fetching discount rules:\", error)\n      alert(\"Login failed: \" + error.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleCreateRule = async (e) => {\n    e.preventDefault()\n    setLoading(true)\n\n    try {\n      const result = await apiCall(\"/admin/discount-rules\", \"POST\", newRule, { adminPassword })\n\n      if (result.success || result.rule) {\n        const rule = result.rule || result\n        setDiscountRules([...discountRules, rule])\n        setNewRule({\n          name: \"\",\n          description: \"\",\n          discountPercentage: 10,\n          requiredItems: { top: true, bottom: true },\n        })\n        alert(\"Discount rule created successfully\")\n      }\n    } catch (error) {\n      console.error(\"[FitLook] Error creating rule:\", error)\n      alert(\"Failed to create discount rule: \" + error.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"admin-login\">\n        <h2>Admin Panel</h2>\n        <form onSubmit={handleAdminLogin}>\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Admin Password</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              value={adminPassword}\n              onChange={(e) => setAdminPassword(e.target.value)}\n              placeholder=\"Enter admin password (admin123)\"\n            />\n          </div>\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\n            {loading ? \"Logging in...\" : \"Login\"}\n          </button>\n        </form>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"admin-panel\">\n      <h2>Admin Panel</h2>\n\n      {/* Create New Discount Rule */}\n      <section className=\"admin-section\">\n        <h3>Create Discount Rule</h3>\n        <form onSubmit={handleCreateRule}>\n          <div className=\"form-group\">\n            <label htmlFor=\"ruleName\">Rule Name</label>\n            <input\n              type=\"text\"\n              id=\"ruleName\"\n              value={newRule.name}\n              onChange={(e) => setNewRule({ ...newRule, name: e.target.value })}\n              placeholder=\"e.g., Complete Outfit Discount\"\n              required\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"description\">Description</label>\n            <textarea\n              id=\"description\"\n              value={newRule.description}\n              onChange={(e) => setNewRule({ ...newRule, description: e.target.value })}\n              placeholder=\"Describe the discount rule\"\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"discount\">Discount Percentage</label>\n            <input\n              type=\"number\"\n              id=\"discount\"\n              value={newRule.discountPercentage}\n              onChange={(e) => setNewRule({ ...newRule, discountPercentage: Number.parseInt(e.target.value) })}\n              min=\"0\"\n              max=\"100\"\n            />\n          </div>\n\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\n            {loading ? \"Creating...\" : \"Create Rule\"}\n          </button>\n        </form>\n      </section>\n\n      {/* Existing Discount Rules */}\n      <section className=\"admin-section\">\n        <h3>Existing Discount Rules</h3>\n        {discountRules.length > 0 ? (\n          <div className=\"rules-list\">\n            {discountRules.map((rule) => (\n              <div key={rule._id} className=\"rule-card\">\n                <h4>{rule.name}</h4>\n                <p>{rule.description}</p>\n                <p className=\"discount-badge\">{rule.discountPercentage}% OFF</p>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <p>No discount rules created yet</p>\n        )}\n      </section>\n    </div>\n  )\n}\n\nexport default AdminPanel\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}