{"ast":null,"code":"\"use client\";import{useContext,useRef,useEffect,useState}from\"react\";import{FitLookContext}from\"../App\";import{addOutfitToCart,addItemToCart}from\"../services/apiClient\";import VirtualTryOnEngine from\"../utils/VirtualTryOnEngine\";import\"../styles/OutfitPreview.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function OutfitPreview(){const{userImage,selectedItems,userProfile,setCurrentStep}=useContext(FitLookContext);const canvasRef=useRef(null);const[discountApplied,setDiscountApplied]=useState(false);const[loading,setLoading]=useState(false);const[totalPrice,setTotalPrice]=useState(0);const[tryOnEngine,setTryOnEngine]=useState(null);const[renderingComplete,setRenderingComplete]=useState(false);// Initialize virtual try-on engine\nuseEffect(()=>{if(canvasRef.current&&userImage&&userProfile){const engine=new VirtualTryOnEngine(canvasRef.current,userProfile);setTryOnEngine(engine);// Load base image and render outfit\nengine.loadBaseImage(userImage).then(()=>{renderOutfit(engine);}).catch(err=>{console.error(\"[FitLook] Error loading base image:\",err);});}},[userImage,userProfile]);// Render outfit on canvas\nconst renderOutfit=async engine=>{try{setRenderingComplete(false);// Apply clothing items in order (top, bottom, shoes, accessories)\nif(selectedItems.top){await engine.applyClothing(selectedItems.top,\"top\");}if(selectedItems.bottom){await engine.applyClothing(selectedItems.bottom,\"bottom\");}if(selectedItems.shoes){await engine.applyClothing(selectedItems.shoes,\"shoes\");}// Apply accessories\nfor(const accessory of selectedItems.accessories){await engine.applyClothing(accessory,\"accessory\");}setRenderingComplete(true);}catch(error){console.error(\"[FitLook] Error rendering outfit:\",error);}};// Re-render when selected items change\nuseEffect(()=>{if(tryOnEngine&&renderingComplete){tryOnEngine.resetCanvas();renderOutfit(tryOnEngine);}},[selectedItems]);// Calculate total price\nuseEffect(()=>{let total=0;if(selectedItems.top)total+=Number.parseFloat(selectedItems.top.price||0);if(selectedItems.bottom)total+=Number.parseFloat(selectedItems.bottom.price||0);if(selectedItems.shoes)total+=Number.parseFloat(selectedItems.shoes.price||0);selectedItems.accessories.forEach(acc=>{total+=Number.parseFloat(acc.price||0);});setTotalPrice(total);},[selectedItems]);// Check if complete outfit is selected\nconst isCompleteOutfit=selectedItems.top&&selectedItems.bottom;// Calculate discount\nconst discountAmount=isCompleteOutfit?totalPrice*0.1:0;const finalPrice=totalPrice-discountAmount;// Handle complete outfit purchase\nconst handleBuyCompleteOutfit=async()=>{setLoading(true);try{var _selectedItems$top$va,_selectedItems$top$va2,_selectedItems$bottom,_selectedItems$bottom2,_selectedItems$shoes,_selectedItems$shoes$,_selectedItems$shoes$2,_selectedItems$shoes2;const topVariantId=((_selectedItems$top$va=selectedItems.top.variants)===null||_selectedItems$top$va===void 0?void 0:(_selectedItems$top$va2=_selectedItems$top$va[0])===null||_selectedItems$top$va2===void 0?void 0:_selectedItems$top$va2.id)||selectedItems.top.id;const bottomVariantId=((_selectedItems$bottom=selectedItems.bottom.variants)===null||_selectedItems$bottom===void 0?void 0:(_selectedItems$bottom2=_selectedItems$bottom[0])===null||_selectedItems$bottom2===void 0?void 0:_selectedItems$bottom2.id)||selectedItems.bottom.id;const shoeVariantId=((_selectedItems$shoes=selectedItems.shoes)===null||_selectedItems$shoes===void 0?void 0:(_selectedItems$shoes$=_selectedItems$shoes.variants)===null||_selectedItems$shoes$===void 0?void 0:(_selectedItems$shoes$2=_selectedItems$shoes$[0])===null||_selectedItems$shoes$2===void 0?void 0:_selectedItems$shoes$2.id)||((_selectedItems$shoes2=selectedItems.shoes)===null||_selectedItems$shoes2===void 0?void 0:_selectedItems$shoes2.id);const accessoryVariantIds=selectedItems.accessories.map(a=>{var _a$variants,_a$variants$;return((_a$variants=a.variants)===null||_a$variants===void 0?void 0:(_a$variants$=_a$variants[0])===null||_a$variants$===void 0?void 0:_a$variants$.id)||a.id;});const result=await addOutfitToCart(topVariantId,bottomVariantId,shoeVariantId,accessoryVariantIds);if(result.checkoutUrl){window.location.href=result.checkoutUrl;}}catch(error){console.error(\"[FitLook] Error adding to cart:\",error);alert(\"Failed to add outfit to cart: \"+error.message);}finally{setLoading(false);}};// Handle single item purchase\nconst handleBuySingleItem=async(item,category)=>{setLoading(true);try{var _item$variants,_item$variants$;const variantId=((_item$variants=item.variants)===null||_item$variants===void 0?void 0:(_item$variants$=_item$variants[0])===null||_item$variants$===void 0?void 0:_item$variants$.id)||item.id;const result=await addItemToCart(variantId,1);if(result.checkoutUrl){window.location.href=result.checkoutUrl;}}catch(error){console.error(\"[FitLook] Error adding item to cart:\",error);alert(\"Failed to add item to cart: \"+error.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"outfit-preview\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Virtual Try-On\"}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"canvas-wrapper\",children:[/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,className:\"preview-canvas\"}),!renderingComplete&&/*#__PURE__*/_jsx(\"div\",{className:\"rendering-indicator\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Rendering your outfit...\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"selected-items-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Selected Items\"}),selectedItems.top&&/*#__PURE__*/_jsxs(\"div\",{className:\"item-summary\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-label\",children:\"Top:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"item-name\",children:selectedItems.top.title}),/*#__PURE__*/_jsxs(\"span\",{className:\"item-price\",children:[\"$\",Number.parseFloat(selectedItems.top.price).toFixed(2)]})]}),selectedItems.bottom&&/*#__PURE__*/_jsxs(\"div\",{className:\"item-summary\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-label\",children:\"Bottom:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"item-name\",children:selectedItems.bottom.title}),/*#__PURE__*/_jsxs(\"span\",{className:\"item-price\",children:[\"$\",Number.parseFloat(selectedItems.bottom.price).toFixed(2)]})]}),selectedItems.shoes&&/*#__PURE__*/_jsxs(\"div\",{className:\"item-summary\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-label\",children:\"Shoes:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"item-name\",children:selectedItems.shoes.title}),/*#__PURE__*/_jsxs(\"span\",{className:\"item-price\",children:[\"$\",Number.parseFloat(selectedItems.shoes.price).toFixed(2)]})]}),selectedItems.accessories.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"item-summary\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-label\",children:\"Accessories:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"item-name\",children:[selectedItems.accessories.length,\" item(s)\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"item-price\",children:[\"$\",selectedItems.accessories.reduce((sum,a)=>sum+Number.parseFloat(a.price||0),0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"price-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Subtotal:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",totalPrice.toFixed(2)]})]}),isCompleteOutfit&&/*#__PURE__*/_jsxs(\"div\",{className:\"price-row discount\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Complete Outfit Discount (10%):\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-$\",discountAmount.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-row total\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",finalPrice.toFixed(2)]})]})]})]}),isCompleteOutfit&&/*#__PURE__*/_jsxs(\"div\",{className:\"discount-banner\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Complete the Look!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You're getting 10% off this complete outfit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleBuyCompleteOutfit,disabled:loading,children:loading?\"Processing...\":\"Buy Complete Outfit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setCurrentStep(\"catalog\"),disabled:loading,children:\"Back to Catalog\"}),!isCompleteOutfit&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setCurrentStep(\"catalog\"),disabled:loading,children:\"Add More Items\"})]})]});}export default OutfitPreview;","map":{"version":3,"names":["useContext","useRef","useEffect","useState","FitLookContext","addOutfitToCart","addItemToCart","VirtualTryOnEngine","jsx","_jsx","jsxs","_jsxs","OutfitPreview","userImage","selectedItems","userProfile","setCurrentStep","canvasRef","discountApplied","setDiscountApplied","loading","setLoading","totalPrice","setTotalPrice","tryOnEngine","setTryOnEngine","renderingComplete","setRenderingComplete","current","engine","loadBaseImage","then","renderOutfit","catch","err","console","error","top","applyClothing","bottom","shoes","accessory","accessories","resetCanvas","total","Number","parseFloat","price","forEach","acc","isCompleteOutfit","discountAmount","finalPrice","handleBuyCompleteOutfit","_selectedItems$top$va","_selectedItems$top$va2","_selectedItems$bottom","_selectedItems$bottom2","_selectedItems$shoes","_selectedItems$shoes$","_selectedItems$shoes$2","_selectedItems$shoes2","topVariantId","variants","id","bottomVariantId","shoeVariantId","accessoryVariantIds","map","a","_a$variants","_a$variants$","result","checkoutUrl","window","location","href","alert","message","handleBuySingleItem","item","category","_item$variants","_item$variants$","variantId","className","children","ref","title","toFixed","length","reduce","sum","onClick","disabled"],"sources":["C:/Users/abhig/Downloads/fitlook-app/frontend/src/components/OutfitPreview.jsx"],"sourcesContent":["\"use client\"\n\nimport { useContext, useRef, useEffect, useState } from \"react\"\nimport { FitLookContext } from \"../App\"\nimport { addOutfitToCart, addItemToCart } from \"../services/apiClient\"\nimport VirtualTryOnEngine from \"../utils/VirtualTryOnEngine\"\nimport \"../styles/OutfitPreview.css\"\n\nfunction OutfitPreview() {\n  const { userImage, selectedItems, userProfile, setCurrentStep } = useContext(FitLookContext)\n  const canvasRef = useRef(null)\n  const [discountApplied, setDiscountApplied] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const [totalPrice, setTotalPrice] = useState(0)\n  const [tryOnEngine, setTryOnEngine] = useState(null)\n  const [renderingComplete, setRenderingComplete] = useState(false)\n\n  // Initialize virtual try-on engine\n  useEffect(() => {\n    if (canvasRef.current && userImage && userProfile) {\n      const engine = new VirtualTryOnEngine(canvasRef.current, userProfile)\n      setTryOnEngine(engine)\n\n      // Load base image and render outfit\n      engine\n        .loadBaseImage(userImage)\n        .then(() => {\n          renderOutfit(engine)\n        })\n        .catch((err) => {\n          console.error(\"[FitLook] Error loading base image:\", err)\n        })\n    }\n  }, [userImage, userProfile])\n\n  // Render outfit on canvas\n  const renderOutfit = async (engine) => {\n    try {\n      setRenderingComplete(false)\n\n      // Apply clothing items in order (top, bottom, shoes, accessories)\n      if (selectedItems.top) {\n        await engine.applyClothing(selectedItems.top, \"top\")\n      }\n\n      if (selectedItems.bottom) {\n        await engine.applyClothing(selectedItems.bottom, \"bottom\")\n      }\n\n      if (selectedItems.shoes) {\n        await engine.applyClothing(selectedItems.shoes, \"shoes\")\n      }\n\n      // Apply accessories\n      for (const accessory of selectedItems.accessories) {\n        await engine.applyClothing(accessory, \"accessory\")\n      }\n\n      setRenderingComplete(true)\n    } catch (error) {\n      console.error(\"[FitLook] Error rendering outfit:\", error)\n    }\n  }\n\n  // Re-render when selected items change\n  useEffect(() => {\n    if (tryOnEngine && renderingComplete) {\n      tryOnEngine.resetCanvas()\n      renderOutfit(tryOnEngine)\n    }\n  }, [selectedItems])\n\n  // Calculate total price\n  useEffect(() => {\n    let total = 0\n    if (selectedItems.top) total += Number.parseFloat(selectedItems.top.price || 0)\n    if (selectedItems.bottom) total += Number.parseFloat(selectedItems.bottom.price || 0)\n    if (selectedItems.shoes) total += Number.parseFloat(selectedItems.shoes.price || 0)\n    selectedItems.accessories.forEach((acc) => {\n      total += Number.parseFloat(acc.price || 0)\n    })\n    setTotalPrice(total)\n  }, [selectedItems])\n\n  // Check if complete outfit is selected\n  const isCompleteOutfit = selectedItems.top && selectedItems.bottom\n\n  // Calculate discount\n  const discountAmount = isCompleteOutfit ? totalPrice * 0.1 : 0\n  const finalPrice = totalPrice - discountAmount\n\n  // Handle complete outfit purchase\n  const handleBuyCompleteOutfit = async () => {\n    setLoading(true)\n    try {\n      const topVariantId = selectedItems.top.variants?.[0]?.id || selectedItems.top.id\n      const bottomVariantId = selectedItems.bottom.variants?.[0]?.id || selectedItems.bottom.id\n      const shoeVariantId = selectedItems.shoes?.variants?.[0]?.id || selectedItems.shoes?.id\n      const accessoryVariantIds = selectedItems.accessories.map((a) => a.variants?.[0]?.id || a.id)\n\n      const result = await addOutfitToCart(topVariantId, bottomVariantId, shoeVariantId, accessoryVariantIds)\n\n      if (result.checkoutUrl) {\n        window.location.href = result.checkoutUrl\n      }\n    } catch (error) {\n      console.error(\"[FitLook] Error adding to cart:\", error)\n      alert(\"Failed to add outfit to cart: \" + error.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // Handle single item purchase\n  const handleBuySingleItem = async (item, category) => {\n    setLoading(true)\n    try {\n      const variantId = item.variants?.[0]?.id || item.id\n      const result = await addItemToCart(variantId, 1)\n\n      if (result.checkoutUrl) {\n        window.location.href = result.checkoutUrl\n      }\n    } catch (error) {\n      console.error(\"[FitLook] Error adding item to cart:\", error)\n      alert(\"Failed to add item to cart: \" + error.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"outfit-preview\">\n      <h2>Your Virtual Try-On</h2>\n\n      {/* Canvas for outfit preview */}\n      <div className=\"preview-container\">\n        <div className=\"canvas-wrapper\">\n          <canvas ref={canvasRef} className=\"preview-canvas\" />\n          {!renderingComplete && (\n            <div className=\"rendering-indicator\">\n              <p>Rendering your outfit...</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Selected items summary */}\n      <div className=\"selected-items-summary\">\n        <h3>Selected Items</h3>\n        {selectedItems.top && (\n          <div className=\"item-summary\">\n            <span className=\"item-label\">Top:</span>\n            <span className=\"item-name\">{selectedItems.top.title}</span>\n            <span className=\"item-price\">${Number.parseFloat(selectedItems.top.price).toFixed(2)}</span>\n          </div>\n        )}\n        {selectedItems.bottom && (\n          <div className=\"item-summary\">\n            <span className=\"item-label\">Bottom:</span>\n            <span className=\"item-name\">{selectedItems.bottom.title}</span>\n            <span className=\"item-price\">${Number.parseFloat(selectedItems.bottom.price).toFixed(2)}</span>\n          </div>\n        )}\n        {selectedItems.shoes && (\n          <div className=\"item-summary\">\n            <span className=\"item-label\">Shoes:</span>\n            <span className=\"item-name\">{selectedItems.shoes.title}</span>\n            <span className=\"item-price\">${Number.parseFloat(selectedItems.shoes.price).toFixed(2)}</span>\n          </div>\n        )}\n        {selectedItems.accessories.length > 0 && (\n          <div className=\"item-summary\">\n            <span className=\"item-label\">Accessories:</span>\n            <span className=\"item-name\">{selectedItems.accessories.length} item(s)</span>\n            <span className=\"item-price\">\n              ${selectedItems.accessories.reduce((sum, a) => sum + Number.parseFloat(a.price || 0), 0).toFixed(2)}\n            </span>\n          </div>\n        )}\n\n        {/* Price Summary */}\n        <div className=\"price-summary\">\n          <div className=\"price-row\">\n            <span>Subtotal:</span>\n            <span>${totalPrice.toFixed(2)}</span>\n          </div>\n          {isCompleteOutfit && (\n            <div className=\"price-row discount\">\n              <span>Complete Outfit Discount (10%):</span>\n              <span>-${discountAmount.toFixed(2)}</span>\n            </div>\n          )}\n          <div className=\"price-row total\">\n            <span>Total:</span>\n            <span>${finalPrice.toFixed(2)}</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Discount banner */}\n      {isCompleteOutfit && (\n        <div className=\"discount-banner\">\n          <h3>Complete the Look!</h3>\n          <p>You're getting 10% off this complete outfit</p>\n          <button className=\"btn btn-primary\" onClick={handleBuyCompleteOutfit} disabled={loading}>\n            {loading ? \"Processing...\" : \"Buy Complete Outfit\"}\n          </button>\n        </div>\n      )}\n\n      {/* Navigation buttons */}\n      <div className=\"preview-actions\">\n        <button className=\"btn btn-secondary\" onClick={() => setCurrentStep(\"catalog\")} disabled={loading}>\n          Back to Catalog\n        </button>\n        {!isCompleteOutfit && (\n          <button className=\"btn btn-primary\" onClick={() => setCurrentStep(\"catalog\")} disabled={loading}>\n            Add More Items\n          </button>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default OutfitPreview\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}