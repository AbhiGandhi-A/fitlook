{"ast":null,"code":"\"use client\";// Component for displaying Shopify products in a grid\nimport{useState,useEffect,useContext}from\"react\";import{FitLookContext}from\"../App\";import{apiCall}from\"../services/mockApi\";import Recommendations from\"./Recommendations\";import\"../styles/ProductCatalog.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductCatalog(){const{setCurrentStep,handleSelectItem}=useContext(FitLookContext);const[products,setProducts]=useState([]);const[filteredProducts,setFilteredProducts]=useState([]);const[selectedCategory,setSelectedCategory]=useState(\"top\");const[loading,setLoading]=useState(true);const[selectedProduct,setSelectedProduct]=useState(null);const[showRecommendations,setShowRecommendations]=useState(false);// Fetch products from backend\nuseEffect(()=>{const fetchProducts=async()=>{try{setLoading(true);const data=await apiCall(\"/api/products/shopify/all\");setProducts(data);filterProductsByCategory(data,selectedCategory);}catch(error){console.error(\"Error fetching products:\",error);}finally{setLoading(false);}};fetchProducts();},[]);// Filter products by category\nconst filterProductsByCategory=(allProducts,category)=>{const filtered=allProducts.filter(p=>p.category===category);setFilteredProducts(filtered);};// Handle category change\nconst handleCategoryChange=category=>{setSelectedCategory(category);filterProductsByCategory(products,category);setSelectedProduct(null);setShowRecommendations(false);};// Handle product selection\nconst handleProductSelect=async product=>{setSelectedProduct(product);handleSelectItem(product,selectedCategory);try{await apiCall(\"/api/recommend/get\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({product:product,userPreferences:{preferredStyle:\"casual\"}})});setShowRecommendations(true);}catch(error){console.error(\"Error fetching recommendations:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"product-catalog\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Select Your Outfit\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"category-filter\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"category-btn \".concat(selectedCategory===\"top\"?\"active\":\"\"),onClick:()=>handleCategoryChange(\"top\"),children:\"Tops\"}),/*#__PURE__*/_jsx(\"button\",{className:\"category-btn \".concat(selectedCategory===\"bottom\"?\"active\":\"\"),onClick:()=>handleCategoryChange(\"bottom\"),children:\"Bottoms\"}),/*#__PURE__*/_jsx(\"button\",{className:\"category-btn \".concat(selectedCategory===\"shoes\"?\"active\":\"\"),onClick:()=>handleCategoryChange(\"shoes\"),children:\"Shoes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"category-btn \".concat(selectedCategory===\"accessory\"?\"active\":\"\"),onClick:()=>handleCategoryChange(\"accessory\"),children:\"Accessories\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"products-grid\",children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading products...\"}):filteredProducts.length>0?filteredProducts.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"product-card \".concat((selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.id)===product.id?\"selected\":\"\"),onClick:()=>handleProductSelect(product),children:[/*#__PURE__*/_jsx(\"img\",{src:product.image||\"/placeholder.svg\",alt:product.title}),/*#__PURE__*/_jsx(\"h3\",{children:product.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[\"$\",product.price]})]},product.id)):/*#__PURE__*/_jsx(\"p\",{children:\"No products found in this category\"})}),showRecommendations&&selectedProduct&&/*#__PURE__*/_jsx(Recommendations,{selectedProduct:selectedProduct}),/*#__PURE__*/_jsxs(\"div\",{className:\"catalog-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setCurrentStep(\"details\"),children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setCurrentStep(\"preview\"),disabled:!selectedProduct,children:\"Preview Outfit\"})]})]});}export default ProductCatalog;","map":{"version":3,"names":["useState","useEffect","useContext","FitLookContext","apiCall","Recommendations","jsx","_jsx","jsxs","_jsxs","ProductCatalog","setCurrentStep","handleSelectItem","products","setProducts","filteredProducts","setFilteredProducts","selectedCategory","setSelectedCategory","loading","setLoading","selectedProduct","setSelectedProduct","showRecommendations","setShowRecommendations","fetchProducts","data","filterProductsByCategory","error","console","allProducts","category","filtered","filter","p","handleCategoryChange","handleProductSelect","product","method","headers","body","JSON","stringify","userPreferences","preferredStyle","className","children","concat","onClick","length","map","id","src","image","alt","title","price","disabled"],"sources":["C:/Users/abhig/Downloads/fitlook-app/frontend/src/components/ProductCatalog.jsx"],"sourcesContent":["\"use client\"\n\n// Component for displaying Shopify products in a grid\nimport { useState, useEffect, useContext } from \"react\"\nimport { FitLookContext } from \"../App\"\nimport { apiCall } from \"../services/mockApi\"\nimport Recommendations from \"./Recommendations\"\nimport \"../styles/ProductCatalog.css\"\n\nfunction ProductCatalog() {\n  const { setCurrentStep, handleSelectItem } = useContext(FitLookContext)\n  const [products, setProducts] = useState([])\n  const [filteredProducts, setFilteredProducts] = useState([])\n  const [selectedCategory, setSelectedCategory] = useState(\"top\")\n  const [loading, setLoading] = useState(true)\n  const [selectedProduct, setSelectedProduct] = useState(null)\n  const [showRecommendations, setShowRecommendations] = useState(false)\n\n  // Fetch products from backend\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        setLoading(true)\n        const data = await apiCall(\"/api/products/shopify/all\")\n        setProducts(data)\n        filterProductsByCategory(data, selectedCategory)\n      } catch (error) {\n        console.error(\"Error fetching products:\", error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchProducts()\n  }, [])\n\n  // Filter products by category\n  const filterProductsByCategory = (allProducts, category) => {\n    const filtered = allProducts.filter((p) => p.category === category)\n    setFilteredProducts(filtered)\n  }\n\n  // Handle category change\n  const handleCategoryChange = (category) => {\n    setSelectedCategory(category)\n    filterProductsByCategory(products, category)\n    setSelectedProduct(null)\n    setShowRecommendations(false)\n  }\n\n  // Handle product selection\n  const handleProductSelect = async (product) => {\n    setSelectedProduct(product)\n    handleSelectItem(product, selectedCategory)\n\n    try {\n      await apiCall(\"/api/recommend/get\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          product: product,\n          userPreferences: { preferredStyle: \"casual\" },\n        }),\n      })\n      setShowRecommendations(true)\n    } catch (error) {\n      console.error(\"Error fetching recommendations:\", error)\n    }\n  }\n\n  return (\n    <div className=\"product-catalog\">\n      <h2>Select Your Outfit</h2>\n\n      {/* Category Filter */}\n      <div className=\"category-filter\">\n        <button\n          className={`category-btn ${selectedCategory === \"top\" ? \"active\" : \"\"}`}\n          onClick={() => handleCategoryChange(\"top\")}\n        >\n          Tops\n        </button>\n        <button\n          className={`category-btn ${selectedCategory === \"bottom\" ? \"active\" : \"\"}`}\n          onClick={() => handleCategoryChange(\"bottom\")}\n        >\n          Bottoms\n        </button>\n        <button\n          className={`category-btn ${selectedCategory === \"shoes\" ? \"active\" : \"\"}`}\n          onClick={() => handleCategoryChange(\"shoes\")}\n        >\n          Shoes\n        </button>\n        <button\n          className={`category-btn ${selectedCategory === \"accessory\" ? \"active\" : \"\"}`}\n          onClick={() => handleCategoryChange(\"accessory\")}\n        >\n          Accessories\n        </button>\n      </div>\n\n      {/* Products Grid */}\n      <div className=\"products-grid\">\n        {loading ? (\n          <p>Loading products...</p>\n        ) : filteredProducts.length > 0 ? (\n          filteredProducts.map((product) => (\n            <div\n              key={product.id}\n              className={`product-card ${selectedProduct?.id === product.id ? \"selected\" : \"\"}`}\n              onClick={() => handleProductSelect(product)}\n            >\n              <img src={product.image || \"/placeholder.svg\"} alt={product.title} />\n              <h3>{product.title}</h3>\n              <p className=\"price\">${product.price}</p>\n            </div>\n          ))\n        ) : (\n          <p>No products found in this category</p>\n        )}\n      </div>\n\n      {/* Recommendations */}\n      {showRecommendations && selectedProduct && <Recommendations selectedProduct={selectedProduct} />}\n\n      {/* Navigation Buttons */}\n      <div className=\"catalog-actions\">\n        <button className=\"btn btn-secondary\" onClick={() => setCurrentStep(\"details\")}>\n          Back\n        </button>\n        <button className=\"btn btn-primary\" onClick={() => setCurrentStep(\"preview\")} disabled={!selectedProduct}>\n          Preview Outfit\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default ProductCatalog\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}