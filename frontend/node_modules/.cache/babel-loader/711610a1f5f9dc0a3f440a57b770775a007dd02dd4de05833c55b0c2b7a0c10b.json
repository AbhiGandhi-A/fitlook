{"ast":null,"code":"\"use client\";import{useState,useEffect,useContext}from\"react\";import{FitLookContext}from\"../App\";import{getRecommendations}from\"../services/apiClient\";import\"../styles/Recommendations.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Recommendations(_ref){let{selectedProduct}=_ref;const{handleSelectItem}=useContext(FitLookContext);const[recommendations,setRecommendations]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchRecommendations=async()=>{try{setLoading(true);setError(null);if(!selectedProduct||!selectedProduct.id){console.log(\"[FitLook] No product selected for recommendations\");setRecommendations([]);setLoading(false);return;}console.log(\"[FitLook] Fetching recommendations for product:\",selectedProduct.id);const data=await getRecommendations(selectedProduct.id,{preferredStyle:\"casual\"});console.log(\"[FitLook] Recommendations received:\",data);// Handle both direct array and object with recommendations property\nconst recs=Array.isArray(data)?data:(data===null||data===void 0?void 0:data.recommendations)||[];setRecommendations(recs);}catch(error){console.error(\"[FitLook] Error fetching recommendations:\",error);setError(error.message);setRecommendations([]);}finally{setLoading(false);}};if(selectedProduct){fetchRecommendations();}},[selectedProduct]);return/*#__PURE__*/_jsxs(\"div\",{className:\"recommendations-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recommended Items\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading recommendations...\"}):error?/*#__PURE__*/_jsxs(\"p\",{className:\"error\",children:[\"Error loading recommendations: \",error]}):recommendations.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"recommendations-grid\",children:recommendations.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"recommendation-card\",onClick:()=>{var _item$productType;let category=\"accessory\";const type=((_item$productType=item.productType)===null||_item$productType===void 0?void 0:_item$productType.toLowerCase())||\"\";if(type.includes(\"shirt\")||type.includes(\"top\")||type.includes(\"dress\")){category=\"top\";}else if(type.includes(\"pant\")||type.includes(\"jean\")||type.includes(\"bottom\")){category=\"bottom\";}else if(type.includes(\"shoe\")||type.includes(\"footwear\")){category=\"shoes\";}handleSelectItem(item,category);},children:[/*#__PURE__*/_jsx(\"img\",{src:item.image||\"/placeholder.svg\",alt:item.title}),/*#__PURE__*/_jsx(\"h4\",{children:item.title}),/*#__PURE__*/_jsx(\"p\",{className:\"category\",children:item.productType}),/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[\"$\",Number.parseFloat(item.price||0).toFixed(2)]})]},item.id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No recommendations available\"})]});}export default Recommendations;","map":{"version":3,"names":["useState","useEffect","useContext","FitLookContext","getRecommendations","jsx","_jsx","jsxs","_jsxs","Recommendations","_ref","selectedProduct","handleSelectItem","recommendations","setRecommendations","loading","setLoading","error","setError","fetchRecommendations","id","console","log","data","preferredStyle","recs","Array","isArray","message","className","children","length","map","item","onClick","_item$productType","category","type","productType","toLowerCase","includes","src","image","alt","title","Number","parseFloat","price","toFixed"],"sources":["C:/Users/abhig/Downloads/fitlook-app/frontend/src/components/Recommendations.jsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useContext } from \"react\"\nimport { FitLookContext } from \"../App\"\nimport { getRecommendations } from \"../services/apiClient\"\nimport \"../styles/Recommendations.css\"\n\nfunction Recommendations({ selectedProduct }) {\n  const { handleSelectItem } = useContext(FitLookContext)\n  const [recommendations, setRecommendations] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n\n  useEffect(() => {\n    const fetchRecommendations = async () => {\n      try {\n        setLoading(true)\n        setError(null)\n\n        if (!selectedProduct || !selectedProduct.id) {\n          console.log(\"[FitLook] No product selected for recommendations\")\n          setRecommendations([])\n          setLoading(false)\n          return\n        }\n\n        console.log(\"[FitLook] Fetching recommendations for product:\", selectedProduct.id)\n\n        const data = await getRecommendations(selectedProduct.id, { preferredStyle: \"casual\" })\n\n        console.log(\"[FitLook] Recommendations received:\", data)\n\n        // Handle both direct array and object with recommendations property\n        const recs = Array.isArray(data) ? data : data?.recommendations || []\n        setRecommendations(recs)\n      } catch (error) {\n        console.error(\"[FitLook] Error fetching recommendations:\", error)\n        setError(error.message)\n        setRecommendations([])\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    if (selectedProduct) {\n      fetchRecommendations()\n    }\n  }, [selectedProduct])\n\n  return (\n    <div className=\"recommendations-section\">\n      <h3>Recommended Items</h3>\n      {loading ? (\n        <p>Loading recommendations...</p>\n      ) : error ? (\n        <p className=\"error\">Error loading recommendations: {error}</p>\n      ) : recommendations.length > 0 ? (\n        <div className=\"recommendations-grid\">\n          {recommendations.map((item) => (\n            <div\n              key={item.id}\n              className=\"recommendation-card\"\n              onClick={() => {\n                let category = \"accessory\"\n                const type = item.productType?.toLowerCase() || \"\"\n                if (type.includes(\"shirt\") || type.includes(\"top\") || type.includes(\"dress\")) {\n                  category = \"top\"\n                } else if (type.includes(\"pant\") || type.includes(\"jean\") || type.includes(\"bottom\")) {\n                  category = \"bottom\"\n                } else if (type.includes(\"shoe\") || type.includes(\"footwear\")) {\n                  category = \"shoes\"\n                }\n                handleSelectItem(item, category)\n              }}\n            >\n              <img src={item.image || \"/placeholder.svg\"} alt={item.title} />\n              <h4>{item.title}</h4>\n              <p className=\"category\">{item.productType}</p>\n              <p className=\"price\">${Number.parseFloat(item.price || 0).toFixed(2)}</p>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <p>No recommendations available</p>\n      )}\n    </div>\n  )\n}\n\nexport default Recommendations\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}