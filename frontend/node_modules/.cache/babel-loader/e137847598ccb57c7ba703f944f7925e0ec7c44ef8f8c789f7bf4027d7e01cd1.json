{"ast":null,"code":"\"use client\";import{useState,useEffect,useContext}from\"react\";import{FitLookContext}from\"../App\";import{fetchAllProducts,getRecommendations}from\"../services/apiClient\";import Recommendations from\"./Recommendations\";import\"../styles/ProductCatalog.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductCatalog(){const{setCurrentStep,handleSelectItem}=useContext(FitLookContext);const[products,setProducts]=useState([]);const[filteredProducts,setFilteredProducts]=useState([]);const[selectedCategory,setSelectedCategory]=useState(\"top\");const[loading,setLoading]=useState(true);const[selectedProduct,setSelectedProduct]=useState(null);const[showRecommendations,setShowRecommendations]=useState(false);// Fetch products from Shopify via backend\nuseEffect(()=>{const fetchProducts=async()=>{try{setLoading(true);console.log(\"[FitLook] Fetching products from Shopify...\");const data=await fetchAllProducts();console.log(\"[FitLook] Products fetched:\",data.length);setProducts(data);filterProductsByCategory(data,selectedCategory);}catch(error){console.error(\"[FitLook] Error fetching products:\",error);alert(\"Failed to load products. Please check your Shopify connection.\");}finally{setLoading(false);}};fetchProducts();},[]);// Filter products by category based on Shopify product type\nconst filterProductsByCategory=(allProducts,category)=>{const filtered=allProducts.filter(p=>{const productType=p.productType.toLowerCase();switch(category){case\"top\":return productType.includes(\"shirt\")||productType.includes(\"top\")||productType.includes(\"dress\");case\"bottom\":return productType.includes(\"pant\")||productType.includes(\"jean\")||productType.includes(\"bottom\");case\"shoes\":return productType.includes(\"shoe\")||productType.includes(\"footwear\");case\"accessory\":return productType.includes(\"accessory\")||productType.includes(\"belt\")||productType.includes(\"bag\");default:return true;}});setFilteredProducts(filtered);};// Handle category change\nconst handleCategoryChange=category=>{setSelectedCategory(category);filterProductsByCategory(products,category);setSelectedProduct(null);setShowRecommendations(false);};// Handle product selection and fetch recommendations\nconst handleProductSelect=async product=>{setSelectedProduct(product);handleSelectItem(product,selectedCategory);try{await getRecommendations(product.id,{preferredStyle:\"casual\"});setShowRecommendations(true);}catch(error){console.error(\"[FitLook] Error fetching recommendations:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"product-catalog\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Select Your Outfit\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"category-filter\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"category-btn \".concat(selectedCategory===\"top\"?\"active\":\"\"),onClick:()=>handleCategoryChange(\"top\"),children:\"Tops\"}),/*#__PURE__*/_jsx(\"button\",{className:\"category-btn \".concat(selectedCategory===\"bottom\"?\"active\":\"\"),onClick:()=>handleCategoryChange(\"bottom\"),children:\"Bottoms\"}),/*#__PURE__*/_jsx(\"button\",{className:\"category-btn \".concat(selectedCategory===\"shoes\"?\"active\":\"\"),onClick:()=>handleCategoryChange(\"shoes\"),children:\"Shoes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"category-btn \".concat(selectedCategory===\"accessory\"?\"active\":\"\"),onClick:()=>handleCategoryChange(\"accessory\"),children:\"Accessories\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"products-grid\",children:loading?/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"Loading products from your Shopify store...\"}):filteredProducts.length>0?filteredProducts.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"product-card \".concat((selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.id)===product.id?\"selected\":\"\"),onClick:()=>handleProductSelect(product),children:[/*#__PURE__*/_jsx(\"img\",{src:product.image||\"/placeholder.svg?height=200&width=200\",alt:product.title}),/*#__PURE__*/_jsx(\"h3\",{children:product.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[\"$\",Number.parseFloat(product.price).toFixed(2)]})]},product.id)):/*#__PURE__*/_jsx(\"p\",{className:\"no-products\",children:\"No products found in this category\"})}),showRecommendations&&selectedProduct&&/*#__PURE__*/_jsx(Recommendations,{selectedProduct:selectedProduct}),/*#__PURE__*/_jsxs(\"div\",{className:\"catalog-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setCurrentStep(\"details\"),children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setCurrentStep(\"preview\"),disabled:!selectedProduct,children:\"Preview Outfit\"})]})]});}export default ProductCatalog;","map":{"version":3,"names":["useState","useEffect","useContext","FitLookContext","fetchAllProducts","getRecommendations","Recommendations","jsx","_jsx","jsxs","_jsxs","ProductCatalog","setCurrentStep","handleSelectItem","products","setProducts","filteredProducts","setFilteredProducts","selectedCategory","setSelectedCategory","loading","setLoading","selectedProduct","setSelectedProduct","showRecommendations","setShowRecommendations","fetchProducts","console","log","data","length","filterProductsByCategory","error","alert","allProducts","category","filtered","filter","p","productType","toLowerCase","includes","handleCategoryChange","handleProductSelect","product","id","preferredStyle","className","children","concat","onClick","map","src","image","alt","title","Number","parseFloat","price","toFixed","disabled"],"sources":["C:/Users/abhig/Downloads/fitlook-app/frontend/src/components/ProductCatalog.jsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useContext } from \"react\"\nimport { FitLookContext } from \"../App\"\nimport { fetchAllProducts, getRecommendations } from \"../services/apiClient\"\nimport Recommendations from \"./Recommendations\"\nimport \"../styles/ProductCatalog.css\"\n\nfunction ProductCatalog() {\n  const { setCurrentStep, handleSelectItem } = useContext(FitLookContext)\n  const [products, setProducts] = useState([])\n  const [filteredProducts, setFilteredProducts] = useState([])\n  const [selectedCategory, setSelectedCategory] = useState(\"top\")\n  const [loading, setLoading] = useState(true)\n  const [selectedProduct, setSelectedProduct] = useState(null)\n  const [showRecommendations, setShowRecommendations] = useState(false)\n\n  // Fetch products from Shopify via backend\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        setLoading(true)\n        console.log(\"[FitLook] Fetching products from Shopify...\")\n        const data = await fetchAllProducts()\n        console.log(\"[FitLook] Products fetched:\", data.length)\n        setProducts(data)\n        filterProductsByCategory(data, selectedCategory)\n      } catch (error) {\n        console.error(\"[FitLook] Error fetching products:\", error)\n        alert(\"Failed to load products. Please check your Shopify connection.\")\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchProducts()\n  }, [])\n\n  // Filter products by category based on Shopify product type\n  const filterProductsByCategory = (allProducts, category) => {\n    const filtered = allProducts.filter((p) => {\n      const productType = p.productType.toLowerCase()\n      switch (category) {\n        case \"top\":\n          return productType.includes(\"shirt\") || productType.includes(\"top\") || productType.includes(\"dress\")\n        case \"bottom\":\n          return productType.includes(\"pant\") || productType.includes(\"jean\") || productType.includes(\"bottom\")\n        case \"shoes\":\n          return productType.includes(\"shoe\") || productType.includes(\"footwear\")\n        case \"accessory\":\n          return productType.includes(\"accessory\") || productType.includes(\"belt\") || productType.includes(\"bag\")\n        default:\n          return true\n      }\n    })\n    setFilteredProducts(filtered)\n  }\n\n  // Handle category change\n  const handleCategoryChange = (category) => {\n    setSelectedCategory(category)\n    filterProductsByCategory(products, category)\n    setSelectedProduct(null)\n    setShowRecommendations(false)\n  }\n\n  // Handle product selection and fetch recommendations\n  const handleProductSelect = async (product) => {\n    setSelectedProduct(product)\n    handleSelectItem(product, selectedCategory)\n\n    try {\n      await getRecommendations(product.id, { preferredStyle: \"casual\" })\n      setShowRecommendations(true)\n    } catch (error) {\n      console.error(\"[FitLook] Error fetching recommendations:\", error)\n    }\n  }\n\n  return (\n    <div className=\"product-catalog\">\n      <h2>Select Your Outfit</h2>\n\n      {/* Category Filter */}\n      <div className=\"category-filter\">\n        <button\n          className={`category-btn ${selectedCategory === \"top\" ? \"active\" : \"\"}`}\n          onClick={() => handleCategoryChange(\"top\")}\n        >\n          Tops\n        </button>\n        <button\n          className={`category-btn ${selectedCategory === \"bottom\" ? \"active\" : \"\"}`}\n          onClick={() => handleCategoryChange(\"bottom\")}\n        >\n          Bottoms\n        </button>\n        <button\n          className={`category-btn ${selectedCategory === \"shoes\" ? \"active\" : \"\"}`}\n          onClick={() => handleCategoryChange(\"shoes\")}\n        >\n          Shoes\n        </button>\n        <button\n          className={`category-btn ${selectedCategory === \"accessory\" ? \"active\" : \"\"}`}\n          onClick={() => handleCategoryChange(\"accessory\")}\n        >\n          Accessories\n        </button>\n      </div>\n\n      {/* Products Grid */}\n      <div className=\"products-grid\">\n        {loading ? (\n          <p className=\"loading-text\">Loading products from your Shopify store...</p>\n        ) : filteredProducts.length > 0 ? (\n          filteredProducts.map((product) => (\n            <div\n              key={product.id}\n              className={`product-card ${selectedProduct?.id === product.id ? \"selected\" : \"\"}`}\n              onClick={() => handleProductSelect(product)}\n            >\n              <img src={product.image || \"/placeholder.svg?height=200&width=200\"} alt={product.title} />\n              <h3>{product.title}</h3>\n              <p className=\"price\">${Number.parseFloat(product.price).toFixed(2)}</p>\n            </div>\n          ))\n        ) : (\n          <p className=\"no-products\">No products found in this category</p>\n        )}\n      </div>\n\n      {/* Recommendations */}\n      {showRecommendations && selectedProduct && <Recommendations selectedProduct={selectedProduct} />}\n\n      {/* Navigation Buttons */}\n      <div className=\"catalog-actions\">\n        <button className=\"btn btn-secondary\" onClick={() => setCurrentStep(\"details\")}>\n          Back\n        </button>\n        <button className=\"btn btn-primary\" onClick={() => setCurrentStep(\"preview\")} disabled={!selectedProduct}>\n          Preview Outfit\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default ProductCatalog\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}