{"ast":null,"code":"\"use client\";// Component for displaying Shopify products in a grid\nimport{useState,useEffect,useContext}from\"react\";import{FitLookContext}from\"../App\";import Recommendations from\"./Recommendations\";import\"../styles/ProductCatalog.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductCatalog(){const{setCurrentStep,handleSelectItem}=useContext(FitLookContext);const[products,setProducts]=useState([]);const[filteredProducts,setFilteredProducts]=useState([]);const[selectedCategory,setSelectedCategory]=useState(\"top\");const[loading,setLoading]=useState(true);const[selectedProduct,setSelectedProduct]=useState(null);const[showRecommendations,setShowRecommendations]=useState(false);// Fetch products from backend\nuseEffect(()=>{const fetchProducts=async()=>{try{setLoading(true);const response=await fetch(\"/api/products/shopify/all\");const data=await response.json();setProducts(data);filterProductsByCategory(data,selectedCategory);}catch(error){console.error(\"Error fetching products:\",error);}finally{setLoading(false);}};fetchProducts();},[]);// Filter products by category\nconst filterProductsByCategory=(allProducts,category)=>{const filtered=allProducts.filter(p=>p.category===category);setFilteredProducts(filtered);};// Handle category change\nconst handleCategoryChange=category=>{setSelectedCategory(category);filterProductsByCategory(products,category);setSelectedProduct(null);setShowRecommendations(false);};// Handle product selection\nconst handleProductSelect=async product=>{setSelectedProduct(product);handleSelectItem(product,selectedCategory);// Fetch recommendations\ntry{const response=await fetch(\"/api/recommend/get\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({selectedProductId:product.id,userPreferences:{preferredStyle:\"casual\"}})});if(response.ok){setShowRecommendations(true);}}catch(error){console.error(\"Error fetching recommendations:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"product-catalog\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Select Your Outfit\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"category-filter\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"category-btn \".concat(selectedCategory===\"top\"?\"active\":\"\"),onClick:()=>handleCategoryChange(\"top\"),children:\"Tops\"}),/*#__PURE__*/_jsx(\"button\",{className:\"category-btn \".concat(selectedCategory===\"bottom\"?\"active\":\"\"),onClick:()=>handleCategoryChange(\"bottom\"),children:\"Bottoms\"}),/*#__PURE__*/_jsx(\"button\",{className:\"category-btn \".concat(selectedCategory===\"shoes\"?\"active\":\"\"),onClick:()=>handleCategoryChange(\"shoes\"),children:\"Shoes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"category-btn \".concat(selectedCategory===\"accessory\"?\"active\":\"\"),onClick:()=>handleCategoryChange(\"accessory\"),children:\"Accessories\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"products-grid\",children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading products...\"}):filteredProducts.length>0?filteredProducts.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"product-card \".concat((selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.id)===product.id?\"selected\":\"\"),onClick:()=>handleProductSelect(product),children:[/*#__PURE__*/_jsx(\"img\",{src:product.image||\"/placeholder.svg\",alt:product.title}),/*#__PURE__*/_jsx(\"h3\",{children:product.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[\"$\",product.price]})]},product.id)):/*#__PURE__*/_jsx(\"p\",{children:\"No products found in this category\"})}),showRecommendations&&selectedProduct&&/*#__PURE__*/_jsx(Recommendations,{selectedProduct:selectedProduct}),/*#__PURE__*/_jsxs(\"div\",{className:\"catalog-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setCurrentStep(\"details\"),children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setCurrentStep(\"preview\"),disabled:!selectedProduct,children:\"Preview Outfit\"})]})]});}export default ProductCatalog;","map":{"version":3,"names":["useState","useEffect","useContext","FitLookContext","Recommendations","jsx","_jsx","jsxs","_jsxs","ProductCatalog","setCurrentStep","handleSelectItem","products","setProducts","filteredProducts","setFilteredProducts","selectedCategory","setSelectedCategory","loading","setLoading","selectedProduct","setSelectedProduct","showRecommendations","setShowRecommendations","fetchProducts","response","fetch","data","json","filterProductsByCategory","error","console","allProducts","category","filtered","filter","p","handleCategoryChange","handleProductSelect","product","method","headers","body","JSON","stringify","selectedProductId","id","userPreferences","preferredStyle","ok","className","children","concat","onClick","length","map","src","image","alt","title","price","disabled"],"sources":["C:/Users/abhig/Downloads/fitlook-app/frontend/src/components/ProductCatalog.jsx"],"sourcesContent":["\"use client\"\n\n// Component for displaying Shopify products in a grid\nimport { useState, useEffect, useContext } from \"react\"\nimport { FitLookContext } from \"../App\"\nimport Recommendations from \"./Recommendations\"\nimport \"../styles/ProductCatalog.css\"\n\nfunction ProductCatalog() {\n  const { setCurrentStep, handleSelectItem } = useContext(FitLookContext)\n  const [products, setProducts] = useState([])\n  const [filteredProducts, setFilteredProducts] = useState([])\n  const [selectedCategory, setSelectedCategory] = useState(\"top\")\n  const [loading, setLoading] = useState(true)\n  const [selectedProduct, setSelectedProduct] = useState(null)\n  const [showRecommendations, setShowRecommendations] = useState(false)\n\n  // Fetch products from backend\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        setLoading(true)\n        const response = await fetch(\"/api/products/shopify/all\")\n        const data = await response.json()\n        setProducts(data)\n        filterProductsByCategory(data, selectedCategory)\n      } catch (error) {\n        console.error(\"Error fetching products:\", error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchProducts()\n  }, [])\n\n  // Filter products by category\n  const filterProductsByCategory = (allProducts, category) => {\n    const filtered = allProducts.filter((p) => p.category === category)\n    setFilteredProducts(filtered)\n  }\n\n  // Handle category change\n  const handleCategoryChange = (category) => {\n    setSelectedCategory(category)\n    filterProductsByCategory(products, category)\n    setSelectedProduct(null)\n    setShowRecommendations(false)\n  }\n\n  // Handle product selection\n  const handleProductSelect = async (product) => {\n    setSelectedProduct(product)\n    handleSelectItem(product, selectedCategory)\n\n    // Fetch recommendations\n    try {\n      const response = await fetch(\"/api/recommend/get\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          selectedProductId: product.id,\n          userPreferences: { preferredStyle: \"casual\" },\n        }),\n      })\n\n      if (response.ok) {\n        setShowRecommendations(true)\n      }\n    } catch (error) {\n      console.error(\"Error fetching recommendations:\", error)\n    }\n  }\n\n  return (\n    <div className=\"product-catalog\">\n      <h2>Select Your Outfit</h2>\n\n      {/* Category Filter */}\n      <div className=\"category-filter\">\n        <button\n          className={`category-btn ${selectedCategory === \"top\" ? \"active\" : \"\"}`}\n          onClick={() => handleCategoryChange(\"top\")}\n        >\n          Tops\n        </button>\n        <button\n          className={`category-btn ${selectedCategory === \"bottom\" ? \"active\" : \"\"}`}\n          onClick={() => handleCategoryChange(\"bottom\")}\n        >\n          Bottoms\n        </button>\n        <button\n          className={`category-btn ${selectedCategory === \"shoes\" ? \"active\" : \"\"}`}\n          onClick={() => handleCategoryChange(\"shoes\")}\n        >\n          Shoes\n        </button>\n        <button\n          className={`category-btn ${selectedCategory === \"accessory\" ? \"active\" : \"\"}`}\n          onClick={() => handleCategoryChange(\"accessory\")}\n        >\n          Accessories\n        </button>\n      </div>\n\n      {/* Products Grid */}\n      <div className=\"products-grid\">\n        {loading ? (\n          <p>Loading products...</p>\n        ) : filteredProducts.length > 0 ? (\n          filteredProducts.map((product) => (\n            <div\n              key={product.id}\n              className={`product-card ${selectedProduct?.id === product.id ? \"selected\" : \"\"}`}\n              onClick={() => handleProductSelect(product)}\n            >\n              <img src={product.image || \"/placeholder.svg\"} alt={product.title} />\n              <h3>{product.title}</h3>\n              <p className=\"price\">${product.price}</p>\n            </div>\n          ))\n        ) : (\n          <p>No products found in this category</p>\n        )}\n      </div>\n\n      {/* Recommendations */}\n      {showRecommendations && selectedProduct && <Recommendations selectedProduct={selectedProduct} />}\n\n      {/* Navigation Buttons */}\n      <div className=\"catalog-actions\">\n        <button className=\"btn btn-secondary\" onClick={() => setCurrentStep(\"details\")}>\n          Back\n        </button>\n        <button className=\"btn btn-primary\" onClick={() => setCurrentStep(\"preview\")} disabled={!selectedProduct}>\n          Preview Outfit\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default ProductCatalog\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}